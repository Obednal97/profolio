# Profolio Development Scripts

This directory contains automated scripts for development environment setup, validation, and maintenance.

## 🚀 **Setup Scripts**

### `setup-dev-environment.sh`

**One-command setup for new team members**

```bash
./scripts/setup-dev-environment.sh
```

**What it does:**

- ✅ Verifies Node.js version (v18.17.0+)
- ✅ Installs/updates pnpm to v9.14.4
- ✅ Installs backend dependencies
- ✅ Generates Prisma client
- ✅ Creates .env from template (if needed)
- ✅ Installs frontend dependencies
- ✅ Verifies TypeScript compilation
- ✅ Checks ESLint configuration
- ✅ Creates validation script

**Usage:**

```bash
# From project root
chmod +x scripts/setup-dev-environment.sh
./scripts/setup-dev-environment.sh
```

### `validate-environment.sh`

**Environment validation and health check**

```bash
./scripts/validate-environment.sh
```

**What it checks:**

- ✅ pnpm version (must be 9.14.4)
- ✅ Backend .env file exists
- ✅ Backend TypeScript compilation
- ✅ Prisma client generation
- ✅ Frontend TypeScript compilation
- ✅ React Hook dependency warnings

**Auto-generated by:** `setup-dev-environment.sh`

## 🔧 **Release Scripts**

### `prepare-release.mjs`

**Automated release preparation**

Prepares version bumps, changelog updates, and release artifacts.

### `check-release-date.sh`

**Release date validation**

Validates release dates and version consistency.

## 📋 **Script Usage Guidelines**

### **For New Team Members**

1. Clone the repository
2. Run: `./scripts/setup-dev-environment.sh`
3. Follow the prompts to complete setup
4. Use: `./scripts/validate-environment.sh` anytime to check health

### **For Regular Development**

```bash
# Quick environment check
./scripts/validate-environment.sh

# After pulling changes
pnpm install  # In both backend/ and frontend/
pnpm prisma generate  # In backend/ if schema changed

# Before committing
pnpm run lint          # Fix React Hook warnings
pnpm run type-check    # Fix TypeScript errors
pnpm run build         # Ensure build succeeds
```

### **Troubleshooting**

If any script fails:

1. **Permission Issues**

   ```bash
   chmod +x scripts/*.sh
   ```

2. **pnpm Not Found**

   ```bash
   npm install -g pnpm@9.14.4
   ```

3. **Prisma Issues**

   ```bash
   cd backend && pnpm prisma generate
   ```

4. **Build Issues**
   ```bash
   rm -rf .next node_modules
   pnpm install
   pnpm run build
   ```

## 🔍 **Expected Output**

### **Successful Setup**

```bash
🚀 Setting up Profolio development environment...
==================================================
✅ Node.js version v18.17.0 is compatible
✅ pnpm 9.14.4 is ready
✅ Backend dependencies installed
✅ Prisma client generation successful
✅ Backend TypeScript compilation successful
✅ Frontend dependencies installed
✅ Frontend TypeScript compilation successful
✅ ESLint passes with no warnings

🎉 Environment validation successful! You're ready to develop.
```

### **Successful Validation**

```bash
🔍 Validating Profolio development environment...
✅ pnpm version correct: 9.14.4
✅ Backend .env file exists
✅ Backend TypeScript compilation successful
✅ Prisma client generation successful
✅ Frontend TypeScript compilation successful
✅ No React Hook warnings found

🎉 Environment validation successful! You're ready to develop.
```

## 🚨 **Common Issues & Solutions**

### **Issue: React Hook Warnings**

```bash
⚠️  Found 3 React Hook warnings - run 'pnpm run lint' to see details
```

**Solution:**

```bash
cd frontend
pnpm run lint  # See specific warnings
# Fix missing dependencies in useEffect, useCallback, useMemo
```

### **Issue: Prisma Client Not Generated**

```bash
❌ Prisma client generation failed
```

**Solution:**

```bash
cd backend
pnpm prisma generate
pnpm run type-check  # Verify fix
```

### **Issue: TypeScript Compilation Failed**

```bash
❌ Backend TypeScript compilation failed
```

**Solution:**

```bash
# Check for missing environment variables
cat backend/.env

# Ensure all required variables are set:
# - JWT_SECRET
# - API_ENCRYPTION_KEY
# - DATABASE_URL
```

## 📚 **Related Documentation**

- [Team Development Setup Guide](../docs/development/TEAM_DEVELOPMENT_SETUP.md)
- [Package Manager Migration](../docs/development/PACKAGE_MANAGER_MIGRATION.md)
- [Code Quality Checklist](../docs/processes/CODE_QUALITY_CHECKLIST.md)

## 🔄 **Script Maintenance**

### **Adding New Scripts**

1. Create script in `scripts/` directory
2. Make executable: `chmod +x scripts/your-script.sh`
3. Update this README
4. Test thoroughly before committing

### **Updating Existing Scripts**

1. Test changes locally
2. Update version comments in script
3. Update this README if behavior changes
4. Verify with fresh environment

---

**💡 Pro Tip**: Bookmark `./scripts/validate-environment.sh` - run it whenever something feels off with your development environment!
